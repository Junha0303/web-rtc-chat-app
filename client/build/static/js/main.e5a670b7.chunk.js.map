{"version":3,"sources":["SocketContext.js","components/VideoPlayer.jsx","components/Options.jsx","components/Notifications.jsx","App.js","index.js"],"names":["SocketContext","createContext","socket","io","ContextProvider","children","useState","stream","setStream","me","setMe","call","setCall","callAccepted","setCallAccepted","callEnded","setCallEnded","name","setName","myVideo","useRef","userVideo","connectionRef","useEffect","navigator","mediaDevices","getUserMedia","video","audio","then","currentStream","current","srcObject","on","id","from","callerName","signal","isReceived","Provider","value","callUser","peer","Peer","initiator","trickle","data","emit","userToCall","signalData","leaveCall","destroy","window","location","reload","answerCall","to","useStyles","makeStyles","theme","width","breakpoints","down","gridContainer","justifyContent","flexDirection","paper","padding","margin","VideoPlayer","useContext","classes","Grid","container","className","Paper","item","xs","md","Typography","variant","gutterBottom","playsInline","muted","ref","autoPlay","root","display","marginTop","Options","idToCall","setIdToCall","Container","elevation","noValidate","autoComplete","TextField","label","onChange","e","target","fullWidth","text","Button","color","startIcon","Assignment","fontSize","onClick","alert","disabled","PhoneDisabled","Phone","Notifications","style","marginLeft","appBar","borderRadius","alignItems","wrapper","App","AppBar","position","align","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e5a670b7.chunk.js","sourcesContent":["import react, { createContext, useState, useRef, useEffect } from 'react';\nimport { io } from 'socket.io-client';\nimport Peer from 'simple-peer';\n\nconst SocketContext = createContext();\n\nconst socket = io('https://csjunha-video-chat-app.herokuapp.com/');\n\nconst ContextProvider = ({ children }) => {\n\n    const [stream, setStream] = useState(null);\n    const [me, setMe] = useState('');\n    const [call, setCall] = useState({}); \n    const [callAccepted, setCallAccepted] = useState(false);\n    const [callEnded, setCallEnded] = useState(false);\n    const [name, setName] = useState('');\n\n    const myVideo = useRef();\n    const userVideo = useRef();\n    const connectionRef = useRef();\n\n    useEffect(() => {\n        navigator.mediaDevices.getUserMedia({ video: true, audio: true })\n            .then((currentStream) => {\n                setStream(currentStream);\n                \n                myVideo.current.srcObject = currentStream;\n            });\n        \n        socket.on('me', (id) => setMe(id)); \n\n        socket.on('callUser', ({ from, name: callerName, signal }) => {\n            setCall({ isReceived: true, from, name: callerName, signal });\n        });\n    }, []);\n\n    const answerCall = () => {\n        setCallAccepted(true);\n\n        const peer = new Peer({ initiator: false, trickle: false, stream });\n\n        peer.on('signal', (data) => {\n            socket.emit('answerCall', {signal: data, to: call.from});\n        });\n\n        peer.on('stream', (currentStream) => {\n            userVideo.current.srcObject = currentStream;\n        })\n\n        peer.signal(call.signal);\n\n        connectionRef.current = peer;\n    }\n\n    const callUser = (id) => {\n        const peer = new Peer({ initiator: true, trickle: false, stream });\n        \n        peer.on('signal', (data) => {\n            socket.emit('callUser', { userToCall: id, signalData: data, from: me, name });\n        }); \n\n        peer.on('stream', (currentStream) => {\n            userVideo.current.srcObject = currentStream;\n        });\n\n        socket.on('callAccepted', (signal) => {\n            setCallAccepted(true);\n\n            peer.signal(signal);\n        });\n\n        connectionRef.current = peer;\n    }\n\n    const leaveCall = () => {\n        setCallEnded(true);\n\n        connectionRef.current.destroy();\n\n        window.location.reload();\n    }\n\n    return (\n        <SocketContext.Provider value = {{\n            call,\n            callAccepted,\n            myVideo,\n            userVideo,\n            stream,\n            name,\n            setName,\n            callEnded,\n            me,\n            callUser,\n            leaveCall,\n            answerCall,\n        }}>\n\n            {children}\n\n        </SocketContext.Provider>\n    );\n}\n\nexport { ContextProvider, SocketContext };","import React, { useContext } from 'react';\nimport { Grid, Typography, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { SocketContext } from '../SocketContext';\n\nconst useStyles = makeStyles((theme) => ({\n    video: {\n        width: '550px',\n        [theme.breakpoints.down('xs')]: {\n            width: '300px',\n        },\n    },\n    gridContainer: {\n        justifyContent: 'center',\n        [theme.breakpoints.down('xs')]: {\n            flexDirection: 'column',\n        },\n    },\n    paper: {\n        padding: '10px',\n        margin: '10px',\n    }\n}));\n\nexport default function VideoPlayer() {\n    const { name, callAccepted, myVideo, userVideo, callEnded, stream, call } = useContext(SocketContext);\n    const classes = useStyles();\n\n    return (\n        <Grid container className = {classes.gridContainer}>\n            {/* Our own video */}\n            { stream && (\n                <Paper className = {classes.paper}>\n                    <Grid item xs={12} md={6}>\n                        <Typography variant=\"h6\" gutterBottom>\n                            { name || 'Name' }\n                        </Typography>\n                        < video playsInline muted ref={myVideo} autoPlay className = {classes.video} />\n                    </Grid>\n                </Paper>\n            )}\n    \n            {/* User's video */}\n            { callAccepted && !callEnded && (\n                <Paper className = {classes.paper}>\n                    <Grid item xs={12} md={6}>\n                        <Typography variant=\"h6\" gutterBottom>\n                            { call.name || 'Name' }\n                        </Typography>\n                        < video playsInline ref={userVideo} autoPlay className = {classes.video} />\n                    </Grid> \n                </Paper>\n            )}\n        </Grid>\n    );\n}","import React, { useContext, useState } from 'react';\nimport { Button, TextField, Grid, Typography, Container, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { Assignment, Phone, PhoneDisabled } from '@material-ui/icons';\n\nimport { SocketContext } from '../SocketContext';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    gridContainer: {\n        width: '100%',\n        [theme.breakpoints.down('xs')]: {\n            flexDirection: 'column',\n        },\n    },\n    container: {\n        width: '600px',\n        margin: '35px 0',\n        padding: 0,\n        [theme.breakpoints.down('xs')] : {\n            width: '80%',\n        },\n    },\n    margin: {\n        marginTop: 20,\n    },\n    padding: {\n        padding: 20,\n    },\n    paper: {\n        padding: '10px 20px',\n    },\n}));\n\nexport default function Options({ children }) {\n    const { me, callAccepted, name, setName, callEnded, leaveCall, callUser  } = useContext(SocketContext);\n    const [idToCall, setIdToCall] = useState('');\n    const classes = useStyles();\n\n    return (\n        <Container className={classes.container}>\n            <Paper elevation={10} className={classes.paper}>\n                <form className={classes.root} noValidate autoComplete=\"off\">\n                    <Grid container className={classes.gridContainer}>\n                        <Grid item xs={12} md={6} className={classes.padding}>\n                            <Typography gutterBottom variant = \"h6\">\n                                Account Info\n                            </Typography>\n                            <TextField label=\"Name\" value={name} onChange={(e) => setName(e.target.value)} fullWidth/>\n                            <CopyToClipboard text={me} className={classes.margin}>\n                                <Button \n                                    variant=\"contained\" \n                                    color=\"primary\" \n                                    fullWidth \n                                    startIcon={<Assignment fontSize=\"large\"/>} \n                                    onClick={()=>alert('Successfully copied into clipboard.')}\n                                    disabled = {name === ''}\n                                >\n                                    Copy your ID\n                                </Button>\n                            </CopyToClipboard>\n                        </Grid>\n\n                        <Grid item xs={12} md={6} className={classes.padding}>\n                            <Typography gutterBottom variant = \"h6\">\n                                Make A Call\n                            </Typography>\n                            <TextField label=\"ID to Call\" value={idToCall} onChange={(e) => setIdToCall(e.target.value)} fullWidth/>\n                            { callAccepted && !callEnded ? (\n                                <Button \n                                    variant=\"contained\" \n                                    color=\"secondary\" \n                                    startIcon={<PhoneDisabled fontSize=\"large\"/>} \n                                    fullWidth\n                                    onClick={leaveCall}\n                                    className={classes.margin}\n                                >\n                                    Hang Up\n                                </Button>\n                            ) : (\n                                <Button\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    startIcon={<Phone fontSize=\"large\" />}\n                                    fullWidth\n                                    onClick = {() => {\n                                        callUser(idToCall);\n                                    }}\n                                    className = {classes.margin}\n                                    disabled = {idToCall === ''}\n                                >\n                                    Call\n                                </Button>\n                            )}\n                        </Grid>\n                    </Grid>\n                </form>\n                {children}\n            </Paper>\n        </Container>\n    );\n}","import React, { useContext } from 'react';\nimport { Button } from '@material-ui/core'\n\nimport { SocketContext } from '../SocketContext';\n\nexport default function Notifications() {\n    const { answerCall, call, callAccepted } = useContext(SocketContext);\n\n    return (\n        <>\n            {call.isReceived && !callAccepted &&  (\n                <div style={{ display: 'flex', justifyContent: 'center'}}>\n                    <h1>{call.name} is calling : </h1>\n                    <Button \n                        variant=\"contained\" \n                        color=\"primary\" \n                        onClick={answerCall}\n                        style={{ marginLeft: '3%' }}\n                    >\n                        Answer\n                    </Button>\n                </div>\n            )}\n        </>\n    );\n}","import React from 'react';\nimport { Typography, AppBar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport VideoPlayer from './components/VideoPlayer';\nimport Options from './components/Options';\nimport Notifications from './components/Notifications';\nimport { width } from '@material-ui/system';\n\nconst useStyles = makeStyles( (theme) => ({\n    appBar: {\n        borderRadius: 15,\n        margin: '30px 100px',\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '40%',\n\n        [theme.breakpoints.down('xs')]: {\n            width: '90%',\n        },\n    },\n    wrapper: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        width: '100%',\n    },\n}));\n\nexport default function App () {\n    const classes = useStyles();\n    \n    return (\n        <div className = {classes.wrapper}>\n            <AppBar \n                className = {classes.appBar}\n                position = \"static\" \n                color = \"inherit\">\n                <Typography className = \"title\" variant = \"h4\" align = \"center\"> \n                    <strong><i>Welcome to Video Chat</i></strong> \n                </Typography>\n            </AppBar>\n\n            <VideoPlayer />\n            <Options>\n                <Notifications />\n            </Options>\n        </div>\n    );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from  './App';\nimport { ContextProvider } from './SocketContext';\nimport './styles.css';\n\nReactDOM.render(\n    <ContextProvider>\n        <App />\n    </ContextProvider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}